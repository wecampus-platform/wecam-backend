<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>í•™ìƒíšŒ ì†Œì† ì¸ì¦ ìš”ì²­ ì¡°íšŒ í…ŒìŠ¤íŠ¸</title>
</head>
<body>
<h2>ì†Œì† ì¸ì¦ ìš”ì²­ ëª©ë¡ ì¡°íšŒ</h2>

<label for="councilName">í•™ìƒíšŒ ì´ë¦„ (í™”ë©´ìš©)</label><br>
<input type="text" id="councilName" value="ì»´ê³µí•™ìƒíšŒ"><br><br>

<label for="councilId">councilId</label><br>
<input type="number" id="councilId" value="1"><br><br>

<button onclick="fetchRequests()">ì¡°íšŒí•˜ê¸°</button>

<h3>ê²°ê³¼</h3>
<pre id="result"></pre>

<script>
    async function fetchRequests() {
        const councilName = document.getElementById("councilName").value;
        const councilId = document.getElementById("councilId").value;
        const token = localStorage.getItem("accessToken");

        console.log(token);

        console.log("ì €ì¥ëœ accessToken:", token);
        if (!token) {
            alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return;
        }

        const url = `/admin/council/${encodeURIComponent(councilName)}/affiliation/requests?councilId=${councilId}`;
        console.log("ìš”ì²­ URL:", url);

        try {
            const res = await fetch(url, {
                method: "GET",
                headers: {
                    "Authorization": `Bearer ${token}`,
                    "Accept": "application/json"
                }
            });

            console.log("ì‘ë‹µ ìƒíƒœ ì½”ë“œ:", res.status);
            if (!res.ok) throw new Error(`ì˜¤ë¥˜: ${res.status}`);

            const data = await res.json();
            console.log("ì‘ë‹µ ë°ì´í„°:", data);
            document.getElementById("result").textContent = JSON.stringify(data, null, 2);
        } catch (e) {
            console.error("ìš”ì²­ ì‹¤íŒ¨:", e);
            document.getElementById("result").textContent = e.message;
        }
    }
</script>
</body>
</html>
<!--<!DOCTYPE html>-->
<!--<html lang="ko">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>í† í° í™•ì¸ í…ŒìŠ¤íŠ¸</title>-->
<!--</head>-->
<!--<body>-->
<!--<h2>ğŸ”¥ ì €ì¥ëœ Access Token ë³´ê¸°</h2>-->
<!--<pre id="tokenDisplay">ë¡œë”© ì¤‘...</pre>-->

<!--<script>-->
<!--    const token = localStorage.getItem("accessToken");-->
<!--    document.getElementById("tokenDisplay").innerText = token ? token : "í† í° ì—†ìŒ (ë¡œê·¸ì¸ ì•ˆë¨)";-->
<!--</script>-->
<!--</body>-->
<!--</html>-->
